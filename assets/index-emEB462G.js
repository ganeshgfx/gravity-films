import{e as E,C as d,f as M,V as h,h as D,R as p,r as R,j as g,D as q,b as w,d as m,k as H}from"./index-CYG0GMNj.js";import{E as I}from"./ExternalInteractorBase-4vlObBgZ.js";const P=2,l=.5,O=Math.PI*l,b=2,y=10,T=0;function x(s,e,t,o,c){const i=s.particles.quadTree.query(o,c);for(const n of i)o instanceof d?M(D(n),{position:e,radius:t,mass:t**P*O,velocity:h.origin,factor:h.origin}):o instanceof p&&R(n,g(e,t))}function S(s,e,t,o){const c=document.querySelectorAll(e);c.length&&c.forEach(i=>{const n=i,a=s.retina.pixelRatio,r={x:(n.offsetLeft+n.offsetWidth*l)*a,y:(n.offsetTop+n.offsetHeight*l)*a},v=n.offsetWidth*l*a,u=y*a,B=t.type===q.circle?new d(r.x,r.y,v+u):new p(n.offsetLeft*a-u,n.offsetTop*a-u,n.offsetWidth*a+u*b,n.offsetHeight*a+u*b);o(r,v,B)})}function W(s,e,t,o){E(t,e,(c,i)=>S(s,c,i,(n,a,r)=>x(s,n,a,r,o)))}function A(s,e){const t=s.retina.pixelRatio,o=y*t,c=s.interactivity.mouse.position,i=s.retina.bounceModeDistance;!i||i<T||!c||x(s,c,i,new d(c.x,c.y,i+o),e)}class C{constructor(){this.distance=200}load(e){e&&e.distance!==void 0&&(this.distance=e.distance)}}const f="bounce";class F extends I{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,o=t.interactivity.events,c=e.interactivity.status===w,i=o.onHover.enable,n=o.onHover.mode,a=o.onDiv;c&&i&&m(f,n)?A(this.container,r=>this.isEnabled(r)):W(this.container,a,f,r=>this.isEnabled(r))}isEnabled(e){const t=this.container,o=t.actualOptions,c=t.interactivity.mouse,i=((e==null?void 0:e.interactivity)??o.interactivity).events,n=i.onDiv;return!!c.position&&i.onHover.enable&&m(f,i.onHover.mode)||H(f,n)}loadModeOptions(e,...t){e.bounce||(e.bounce=new C);for(const o of t)e.bounce.load(o==null?void 0:o.bounce)}reset(){}}async function j(s,e=!0){await s.addInteractor("externalBounce",t=>Promise.resolve(new F(t)),e)}export{C as Bounce,j as loadExternalBounceInteraction};
